(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{139:function(e,t,a){e.exports=a(262)},167:function(e,t){},169:function(e,t){},179:function(e,t){},181:function(e,t){},208:function(e,t){},209:function(e,t){},214:function(e,t){},216:function(e,t){},240:function(e,t){},262:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),c=a(19),s=a(24),o=a(25),i=a(5),l=a(27),u=a(26),p=a(0),d=a.n(p),m=a(22),h=a.n(m),f=a(51),b=a(70),y=a.n(b),g=a(45),v=a(20),E=a.n(v),O=a(28),j=a.n(O),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={show:!1,product:"0"},n.imgs=n.imgs.bind(Object(i.a)(n)),n.showModal=n.showModal.bind(Object(i.a)(n)),n.hideModal=n.hideModal.bind(Object(i.a)(n)),n.addToCart=n.addToCart.bind(Object(i.a)(n)),n.query=n.query.bind(Object(i.a)(n)),n.updateCart=n.props.updateCart,n.quantity=d.a.createRef(),n}return Object(o.a)(a,[{key:"imgs",value:function(){var e=this;if(void 0!==this.props.imgs&&null!==this.props.imgs){for(var t=Object(f.a)(Array(this.props.imgs.length).keys()).map((function(t){return d.a.createElement("img",{className:"p-2 rounded img-thumbnail",key:t,style:{width:"200px",height:"200px"},src:"./images/".concat(e.props.category,"/").concat(e.props.imgs[t]),alt:t})})),a=[],n=[],r=0;r<t.length;r++)n.push(d.a.createElement("td",{onClick:this.showModal.bind(this,this.props.imgs[r]),key:r},t[r])),(r%4===0&&0!==r||t.length<5&&r===t.length-1||r===t.length-1)&&(a.push(d.a.createElement("tr",{key:r,className:"d-flex justify-content-center"},n)),n=[]);return d.a.createElement("table",{style:{marginLeft:"auto",marginRight:"auto"},className:"table-borderless"},d.a.createElement("tbody",null,a))}}},{key:"showModal",value:function(e){this.setState({show:!0,product:e})}},{key:"hideModal",value:function(){this.setState({show:!1})}},{key:"query",value:function(e,t,a){var n;n=0===e?{url:"/graphql",method:"POST",headers:{"Content-Type":"application/json"},data:{query:t,variables:a}}:{url:"/graphql",method:"POST",headers:{"Content-Type":"application/json"},data:{query:t}},j()(n)}},{key:"addToCart",value:function(e,t){try{var a=JSON.parse(E.a.get("mi-armario"));if(""!==a.username){a.cart[e]=isNaN(a.cart[e])?parseInt(t.current.value,10):a.cart[e]+parseInt(t.current.value,10),E.a.set("mi-armario",JSON.stringify(a));for(var n=this.props.product,r=0;r<n.length;r++)n[r].id===e&&(n[r].quantity=n[r].quantity-parseInt(t.current.value,10));this.updateCart(a.cart,n)}}catch(c){}this.setState({show:!1})}},{key:"render",value:function(){var e,t,a,n,r,c,s=this;try{e=JSON.parse(E.a.get("mi-armario"))}catch(o){}if(void 0!==this.props.product&&"length"in this.props.product){this.props.product.forEach((function(e){e.id===s.state.product.replace(".png","")&&(t="name"in e?e.name:"",a="price"in e?e.price:"",n="size"in e?e.size:"",r="id"in e?e.id:"",c="quantity"in e?e.quantity:"")}));try{c=void 0===e.cart[r]?c:c-e.cart[r]}catch(o){}return d.a.createElement("div",null,this.imgs(),d.a.createElement(g.a,{show:this.state.show,onHide:this.hideModal,dialogClassName:"modal-dialog modal-dialog-centered modal-lg"},d.a.createElement(g.a.Header,{style:{fontSize:"40px"}},t),d.a.createElement(g.a.Body,null,d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col"},d.a.createElement("img",{src:"./images/".concat(this.props.category,"/").concat(this.state.product),style:{width:"500px",height:"500px"},alt:""})),d.a.createElement("div",{className:"col pt-5"},d.a.createElement("div",{style:{fontSize:"25px"},className:"font-weight-bold text-primary"},a," ",d.a.createElement("small",{style:{fontSize:"20px"},className:"font-weight-bold"},"EGP")),d.a.createElement("br",null),d.a.createElement("label",{className:"font-weight-bold",style:{fontSize:"25px"}},"Size: ",d.a.createElement("br",null),d.a.createElement("button",{style:{fontSize:"20px"},className:"btn btn-outline-dark font-weight-bold text-capitalize"},n)),d.a.createElement("br",null),d.a.createElement("label",{className:"font-weight-bold",style:{fontSize:"25px"}},"Quantity:",d.a.createElement("div",{className:"input-group input-group-sm mb-3"},d.a.createElement("input",{type:"number",min:"0",max:c,defaultValue:"0",ref:this.quantity,className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"}))))))),d.a.createElement(g.a.Footer,null,d.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.addToCart.bind(this,r,this.quantity)},"Add to Cart"))))}return null}}]),a}(d.a.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={category:0},n.inactive={fontFamily:"Zilla Slab, serif",fontSize:"large",fontWeight:400},n.active={fontFamily:"Zilla Slab, serif",fontSize:"large",fontWeight:600},n.black="btn btn-light border border-light rounded-1 mr-2 d-flex pl-5 pr-5",n.gray="btn btn-outline-secondary border border-light rounded-1 mr-2 d-flex pl-5 pr-5",n.products={0:"tshirts",1:"shoes",2:"bags",3:"pants",4:"jackets"},n.setActive=n.setActive.bind(Object(i.a)(n)),n.setStyle=n.setStyle.bind(Object(i.a)(n)),n.setClass=n.setClass.bind(Object(i.a)(n)),n.categories=n.categories.bind(Object(i.a)(n)),n.getProducts=n.getProducts.bind(Object(i.a)(n)),n.updateCart=n.props.updateCart,n}return Object(o.a)(a,[{key:"setActive",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'{picture(directory:"'.concat(this.products[t],'")}')})});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({category:t,imgs:n.data.picture});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProducts",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{product {\n        id\n        name\n        category_id\n        price\n        size\n        quantity\n      }}"})});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({product:a.data.product});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setStyle",value:function(e){return this.state.category===e?this.active:this.inactive}},{key:"setClass",value:function(e){return this.state.category===e?this.black:this.gray}},{key:"categories",value:function(){var e=this,t={0:"T-Shirts",1:"Shoes",2:"Bags",3:"Pants",4:"Jackets"};return Object(f.a)(Array(5).keys()).map((function(a){return d.a.createElement("button",{type:"button",key:a,className:e.setClass(a),style:e.setStyle(a),onClick:e.setActive.bind(e,a)},t[a])}))}},{key:"componentDidMount",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getProducts(),this.setActive("0");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.a.createElement("div",{className:"text-center",style:{fontFamily:"Playfair Display, serif"}},d.a.createElement("h1",{style:{fontSize:"60px",fontWeight:"400",letterSpacing:"10px"}},"MI ARMARIO."),d.a.createElement("h3",{className:"text-secondary",style:{fontFamily:"El Messiri, sans-serif",fontSize:"30px",fontWeight:"400"}},"YOUR FAVOURITE CUSTOMIZED CLOSET ",d.a.createElement("br",null)," WITH UNIQUE EXCEPTIONAL DESIGNS"),d.a.createElement("div",{className:"row d-flex justify-content-center pt-4"},this.categories()),d.a.createElement("br",null),d.a.createElement(w,{imgs:this.state.imgs,category:this.products[this.state.category],product:this.state.product,updateCart:this.updateCart}))}}]),a}(d.a.Component);function C(e){return d.a.createElement("h1",null,"About Us.")}function S(e){return d.a.createElement("h1",null,"Contact Us")}var N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={name:""},n.name=d.a.createRef(),n.price=d.a.createRef(),n.quantity=d.a.createRef(),n.size=d.a.createRef(),n.image=d.a.createRef(),n.category=d.a.createRef(),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"handleSubmit",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(a=new FormData).append("name",this.name.current.value),a.append("price",this.price.current.value),a.append("quantity",this.quantity.current.value),a.append("size",this.size.current.value),a.append("category",this.category.current.value),a.append("myImage",this.image.current.files[0]),n={headers:{"content-type":"multipart/form-data"}},j.a.post("/upload",a,n).then((function(e){alert("The file is successfully uploaded")})).catch((function(e){}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.a.createElement("form",{onSubmit:this.handleSubmit},d.a.createElement("label",null,"Name:",d.a.createElement("input",{type:"text",ref:this.name})),d.a.createElement("br",null),d.a.createElement("label",null,"Size:",d.a.createElement("input",{type:"text",ref:this.size})),d.a.createElement("br",null),d.a.createElement("label",null,"Price:",d.a.createElement("input",{type:"text",ref:this.price})),d.a.createElement("br",null),d.a.createElement("label",null,"Quantity:",d.a.createElement("input",{type:"text",ref:this.quantity})),d.a.createElement("br",null),d.a.createElement("label",null,"Image:",d.a.createElement("input",{type:"file",ref:this.image,accept:"image/*"})),d.a.createElement("br",null),d.a.createElement("label",null,"Category:",d.a.createElement("select",{ref:this.category},d.a.createElement("option",{value:"0"},"tshirt"),d.a.createElement("option",{value:"1"},"shoes"),d.a.createElement("option",{value:"2"},"bags"),d.a.createElement("option",{value:"3"},"pants"),d.a.createElement("option",{value:"4"},"jacket"))),d.a.createElement("br",null),d.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(d.a.Component),x=a(135),q=a.n(x),T=a(136),z=a.n(T),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={user_id:"",username:"",error:!0,products:[]},n.username=d.a.createRef(),n.password=d.a.createRef(),n.login=n.login.bind(Object(i.a)(n)),n.getProucts=n.getProucts.bind(Object(i.a)(n)),n.getCart=n.getCart.bind(Object(i.a)(n)),n.logout=n.logout.bind(Object(i.a)(n)),n.makeOrder=n.makeOrder.bind(Object(i.a)(n)),n.clearCart=n.props.clearCart,n}return Object(o.a)(a,[{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.username.current.value||!this.password.current.value){e.next=11;break}return t=q()(this.password.current.value),a=this.username.current.value,n='{customer(input:{username: "'.concat(a,'", password: "').concat(t,'", id:""}){id username}}'),c={url:"http://localhost:8081/graphql",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:{query:n}},e.next=7,j()(c);case 7:0!==(s=e.sent).data.data.customer.length?((o=JSON.parse(E.a.get("mi-armario"))).user_id=s.data.data.customer[0].id,o.username=s.data.data.customer[0].username,E.a.set("mi-armario",o),this.setState({user_id:s.data.data.customer[0].id,username:s.data.data.customer[0].username})):this.setState({error:!1}),e.next=12;break;case 11:this.setState({error:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProucts",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"{product{id name}}",t={url:"http://localhost:8081/graphql",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:{query:"{product{id name}}"}},e.next=4,j()(t);case 4:a=e.sent,this.setState({products:a.data.data.product});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=JSON.parse(E.a.get("mi-armario"));e.cart={},e.username="",e.user_id="",E.a.set("mi-armario",e),this.clearCart(),this.setState({user_id:"",username:"",cart:{}})}},{key:"getCart",value:function(){var e=this,t=[];if(!(Object.keys(this.props.cart).length>0))return d.a.createElement("div",null,d.a.createElement("label",{className:"font-weight-bold"},"Your Cart is Empty"));try{return Object.keys(this.props.cart).map((function(a){return e.state.products.forEach((function(n){a===n.id&&t.push(d.a.createElement("div",{className:"dropdown-item",key:a,onClick:e.getProucts},n.name,": ",e.props.cart[a]))}))})),d.a.createElement("div",null,d.a.createElement("label",{className:"font-weight-bold"},"Your Cart"),t,d.a.createElement("button",{className:"btn btn-outline-dark",onClick:this.makeOrder},"Order"))}catch(a){return null}}},{key:"makeOrder",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c,s,o,i,l,u,p,d,m,h,f,b,y,g,v,O,w,k,C,S,N=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=z.a.randomBytes(5).toString("hex"),s=[],o=[],i=[],l=[],u=[],p=[],d=[],m=[],h=[],f=[],b=[],y=[],g=JSON.parse(E.a.get("mi-armario")),v=function(e){Object.keys(N.props.cart).forEach((function(t){N.props.products[e].id===t&&(o.push('"quantity": '.concat(N.props.products[e].quantity)),i.push('"id": "'.concat(t,'"')),l.push('"product_id": "'.concat(t,'"')),s.push('"quantity": '.concat(N.props.cart[t])))}))},O=0;O<this.props.products.length;O++)v(O);for(c='\n            "sale":{\n                "sale": {\n                    "id": "'.concat(t,'",\n                    "status": "pending",\n                    "customer_id": "').concat(g.user_id,'"\n                  }\n            }'),w=0;w<o.length;w++)u.push('"product_set'.concat(w,'": {\n                "product": {\n                    ').concat(o[w],"\n                }\n            }")),p.push('"product_where'.concat(w,'": {\n                "product": {\n                    ').concat(i[w],"\n                }\n            }")),d.push('"sale_item'.concat(w,'": {\n                "sale_item": {\n                    ').concat(s[w],",\n                    ").concat(l[w],',\n                    "sale_id":"').concat(t,'"\n                }\n            }')),m.push("$product_set".concat(w,": Tables!")),h.push("$product_where".concat(w,": Tables!")),f.push("$sale_item".concat(w,": Tables!"));for(n="{\n            ".concat(u.join(",\n"),",\n            ").concat(p.join(",\n"),",\n            ").concat(c,",\n            ").concat(d.join(",\n"),"\n        }"),k=0;k<u.length;k++)b.push("product".concat(k,": update(set:$product_set").concat(k," where:$product_where").concat(k,")")),y.push("sale_item".concat(k,": insert(input:$sale_item").concat(k,")"));return a="mutation(\n            ".concat(m.join(",\n"),",\n            ").concat(h.join(",\n"),",\n            ").concat(f.join(",\n"),"\n            $sale: Tables!){\n            sale: insert(input:$sale)\n            ").concat(b.join(",\n"),"\n            ").concat(y.join(",\n"),"\n          }"),C={url:"http://localhost:8081/graphql",method:"POST",headers:{"content-type":"application/json"},data:{query:a,variables:n}},e.next=24,j()(C);case 24:S=e.sent,console.log(S),g.cart={},E.a.set("mi-armario",g),this.clearCart(),this.setState({cart:{}});case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){try{var e=JSON.parse(E.a.get("mi-armario"));""!==e.username&&this.setState({username:e.username})}catch(t){}this.getProucts()}},{key:"render",value:function(){return""===this.state.username?d.a.createElement("div",{className:"d-flex btn-group dropdown container-fluid"},d.a.createElement("button",{className:"btn btn-light border border-light rounded-1 mr-2 dropdown-toggle",type:"button",style:{fontFamily:"DM Mono, monospace",fontSize:"small",fontWeight:500},"data-toggle":"dropdown"},"Login"),d.a.createElement("div",{className:"dropdown-menu dropdown-menu-right p-2","aria-labelledby":"dropdownMenuButton",style:{width:"300px"}},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{className:"font-weight-bold"},"Username"),d.a.createElement("input",{className:"form-control",type:"text",ref:this.username,autoComplete:"off"}),d.a.createElement("small",{className:"form-text text-muted"},"We'll never share your email with anyone else.")),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{className:"font-weight-bold"},"Password"),d.a.createElement("input",{className:"form-control",type:"password",ref:this.password})),d.a.createElement("button",{className:"btn btn-outline-dark float-right",onClick:this.login},"Login"),d.a.createElement("small",{className:"text-danger",hidden:this.state.error},"*Wrong Username or Password"))):d.a.createElement("div",{className:"d-flex btn-group dropdown container-fluid"},d.a.createElement("button",{className:"btn btn-light border border-light rounded-1 mr-2 dropdown-toggle",type:"button",style:{fontFamily:"DM Mono, monospace",fontSize:"small",fontWeight:500},"data-toggle":"dropdown"},this.state.username),d.a.createElement("div",{className:"dropdown-menu dropdown-menu-right p-2","aria-labelledby":"dropdownMenuButton",style:{width:"300px"}},d.a.createElement("div",null,this.getCart()),d.a.createElement("div",{role:"separator",className:"dropdown-divider"}),d.a.createElement("button",{className:"btn btn-outline-dark float-right",onClick:this.logout},"Logout")))}}]),a}(d.a.Component),M=a(137),_=a(7),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={cart:{},products:[]},n.updateCart=n.updateCart.bind(Object(i.a)(n)),n.clearCart=n.clearCart.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"updateCart",value:function(e,t){this.setState({cart:e,products:t}),h.a.render(d.a.createElement(P,{cart:e,clearCart:this.clearCart,products:t}),document.getElementById("login"))}},{key:"clearCart",value:function(){this.setState({cart:{}}),h.a.render(d.a.createElement(P,{cart:{},clearCart:this.clearCart,products:this.state.products}),document.getElementById("login"))}},{key:"componentDidMount",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{j()({url:"http://localhost:8081/",method:"GET",withCredentials:!0})}catch(t){}h.a.render(d.a.createElement(P,{cart:this.state.cart,clearCart:this.clearCart,products:this.state.products}),document.getElementById("login"));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.a.createElement(M.a,null,d.a.createElement(_.c,null,d.a.createElement(_.a,{exact:!0,path:"/"},d.a.createElement(k,Object.assign({},this.state,{updateCart:this.updateCart}))),d.a.createElement(_.a,{path:"/about"},d.a.createElement(C,null)),d.a.createElement(_.a,{path:"/contact"},d.a.createElement(S,null)),d.a.createElement(_.a,{path:"/upload"},d.a.createElement(N,null))))}}]),a}(d.a.Component);h.a.render(d.a.createElement(I,null),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.2ee6b222.chunk.js.map