{"ast":null,"code":"var _jsxFileName = \"/home/bahnasawy/Desktop/Mi-Armario/client/src/components/Product.js\";\nimport React from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Cookie from 'js-cookie';\nimport axios from 'axios';\nexport default class Product extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: false,\n      product: \"0\"\n    };\n    this.imgs = this.imgs.bind(this);\n    this.showModal = this.showModal.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n    this.query = this.query.bind(this);\n    this.updateCart = this.props.updateCart;\n    this.quantity = React.createRef();\n  }\n\n  imgs() {\n    if (this.props.imgs !== undefined && this.props.imgs !== null) {\n      let imgs = [...Array(this.props.imgs.length).keys()].map(index => /*#__PURE__*/React.createElement(\"img\", {\n        className: \"p-2 rounded img-thumbnail\",\n        key: index,\n        style: {\n          width: \"200px\",\n          height: \"200px\"\n        },\n        src: `./images/${this.props.category}/${this.props.imgs[index]}`,\n        alt: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 21\n        }\n      }));\n      let list = [];\n      let temp = [];\n\n      for (let i = 0; i < imgs.length; i++) {\n        temp.push( /*#__PURE__*/React.createElement(\"td\", {\n          onClick: this.showModal.bind(this, this.props.imgs[i]),\n          key: i,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 19\n          }\n        }, imgs[i]));\n\n        if (i % 4 === 0 && i !== 0 || imgs.length < 5 && i === imgs.length - 1 || i === imgs.length - 1) {\n          list.push( /*#__PURE__*/React.createElement(\"tr\", {\n            key: i,\n            className: \"d-flex justify-content-center\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 21\n            }\n          }, temp));\n          temp = [];\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(\"table\", {\n        style: {\n          marginLeft: \"auto\",\n          marginRight: \"auto\"\n        },\n        className: \"table-borderless\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }\n      }, list));\n    }\n  }\n\n  showModal(i) {\n    this.setState({\n      show: true,\n      product: i\n    });\n  }\n\n  hideModal() {\n    this.setState({\n      show: false\n    });\n  }\n\n  query(type, query, variables) {\n    let options;\n\n    if (type === 0) {\n      options = {\n        url: '/graphql',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: {\n          \"query\": query,\n          \"variables\": variables\n        }\n      };\n    } else {\n      options = {\n        url: '/graphql',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: {\n          \"query\": query\n        }\n      };\n    }\n\n    axios(options);\n  }\n\n  addToCart(id, quantity) {\n    try {\n      let cookie = JSON.parse(Cookie.get('mi-armario'));\n\n      if (cookie.username !== \"\") {\n        cookie.cart[id] = isNaN(cookie.cart[id]) ? parseInt(quantity.current.value, 10) : cookie.cart[id] + parseInt(quantity.current.value, 10);\n        Cookie.set('mi-armario', JSON.stringify(cookie));\n        let products = this.props.product;\n\n        for (let i = 0; i < products.length; i++) {\n          if (products[i].id === id) {\n            products[i].quantity = products[i].quantity - parseInt(quantity.current.value, 10);\n          }\n        }\n\n        this.updateCart(cookie.cart, products);\n      }\n    } catch (e) {}\n\n    this.setState({\n      show: false\n    });\n  }\n\n  render() {\n    let cookie;\n\n    try {\n      cookie = JSON.parse(Cookie.get('mi-armario'));\n    } catch (e) {}\n\n    let name;\n    let price;\n    let size;\n    let id;\n    let quantity;\n\n    if (this.props.product !== undefined && 'length' in this.props.product) {\n      this.props.product.forEach(product => {\n        if (product.id === this.state.product.replace(\".png\", \"\")) {\n          name = 'name' in product ? product.name : \"\";\n          price = 'price' in product ? product.price : \"\";\n          size = 'size' in product ? product.size : \"\";\n          id = 'id' in product ? product.id : \"\";\n          quantity = 'quantity' in product ? product.quantity : \"\";\n        }\n      });\n\n      try {\n        quantity = cookie.cart[id] === undefined ? quantity : quantity - cookie.cart[id];\n      } catch (e) {}\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }\n      }, this.imgs(), /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.hideModal,\n        dialogClassName: \"modal-dialog modal-dialog-centered modal-lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        style: {\n          fontSize: \"40px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      }, name), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: `./images/${this.props.category}/${this.state.product}`,\n        style: {\n          width: \"500px\",\n          height: \"500px\"\n        },\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col pt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontSize: \"25px\"\n        },\n        className: \"font-weight-bold text-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }, price, \" \", /*#__PURE__*/React.createElement(\"small\", {\n        style: {\n          fontSize: \"20px\"\n        },\n        className: \"font-weight-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 31\n        }\n      }, \"EGP\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"font-weight-bold\",\n        style: {\n          fontSize: \"25px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }\n      }, \"Size: \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          fontSize: \"20px\"\n        },\n        className: \"btn btn-outline-dark font-weight-bold text-capitalize\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 23\n        }\n      }, size)), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"font-weight-bold\",\n        style: {\n          fontSize: \"25px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }\n      }, \"Quantity:\", /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group input-group-sm mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        min: \"0\",\n        max: quantity,\n        defaultValue: \"0\",\n        ref: this.quantity,\n        className: \"form-control\",\n        \"aria-label\": \"Small\",\n        \"aria-describedby\": \"inputGroup-sizing-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }\n      }))))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-primary\",\n        onClick: this.addToCart.bind(this, id, this.quantity),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 15\n        }\n      }, \"Add to Cart\"))));\n    }\n\n    return null;\n  }\n\n}","map":{"version":3,"sources":["/home/bahnasawy/Desktop/Mi-Armario/client/src/components/Product.js"],"names":["React","Modal","Cookie","axios","Product","Component","constructor","props","state","show","product","imgs","bind","showModal","hideModal","addToCart","query","updateCart","quantity","createRef","undefined","Array","length","keys","map","index","width","height","category","list","temp","i","push","marginLeft","marginRight","setState","type","variables","options","url","method","headers","data","id","cookie","JSON","parse","get","username","cart","isNaN","parseInt","current","value","set","stringify","products","e","render","name","price","size","forEach","replace","fontSize"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Modal from 'react-bootstrap/Modal'\nimport Cookie from 'js-cookie'\nimport axios from 'axios'\n\nexport default class Product extends React.Component\n{\n  constructor(props)\n  {\n    super(props)\n    this.state = {show: false, product: \"0\"}\n    this.imgs = this.imgs.bind(this)\n    this.showModal = this.showModal.bind(this)\n    this.hideModal = this.hideModal.bind(this)\n    this.addToCart = this.addToCart.bind(this)\n    this.query = this.query.bind(this)\n    this.updateCart = this.props.updateCart\n\n    this.quantity = React.createRef()\n  }\n\n  imgs()\n  {\n    if (this.props.imgs !== undefined && this.props.imgs !== null)\n    {\n      let imgs = [...Array(this.props.imgs.length).keys()]\n      .map(index => <img\n        className=\"p-2 rounded img-thumbnail\" \n        key={index} \n        style={{width: \"200px\", height: \"200px\"}} \n        src={`./images/${this.props.category}/${this.props.imgs[index]}`} \n        alt={index}></img>\n      )\n      let list = []\n      let temp = []\n      for(let i = 0; i < imgs.length; i++)\n      {\n        temp.push(<td onClick={this.showModal.bind(this,this.props.imgs[i])} key={i}>{imgs[i]}</td>)\n        if ((i % 4 === 0 && i !== 0) || (imgs.length < 5 && i === imgs.length - 1) || (i === imgs.length - 1))\n        {\n          list.push(<tr key={i} className=\"d-flex justify-content-center\">{temp}</tr>)\n          temp = []\n        }\n      }\n      return(\n        <table style={{marginLeft: \"auto\", marginRight: \"auto\"}} className=\"table-borderless\">\n          <tbody>\n            {list}\n          </tbody>\n        </table>\n      )\n    }\n  }\n\n  showModal(i)\n  {\n    this.setState({show: true, product: i})\n  }\n\n  hideModal()\n  {\n    this.setState({show: false})\n  }\n\n  query(type, query, variables)\n  {\n    let options\n    if (type === 0)\n    {\n      options = {\n        url: '/graphql',\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        data: {\n          \"query\": query,\n          \"variables\": variables\n        }\n      }\n    }\n    else {\n      options = {\n        url: '/graphql',\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        data: {\n          \"query\": query,\n        }\n      }\n    }\n    axios(options)\n  }\n\n  addToCart(id, quantity)\n  {\n    try{\n      let cookie = JSON.parse(Cookie.get('mi-armario'))\n      if (cookie.username !== \"\")\n      {\n        cookie.cart[id] = isNaN(cookie.cart[id]) ? parseInt(quantity.current.value, 10) : cookie.cart[id] + parseInt(quantity.current.value, 10)\n        Cookie.set('mi-armario', JSON.stringify(cookie))\n        let products = this.props.product\n        for(let i = 0; i < products.length; i++)\n        {\n          if (products[i].id === id)\n          {\n            products[i].quantity = products[i].quantity - parseInt(quantity.current.value, 10)\n          }\n        }\n        this.updateCart(cookie.cart, products)\n      }\n    }catch (e) {}\n    this.setState({show: false})\n  }\n\n  render()\n  {\n    let cookie\n    try{ cookie = JSON.parse(Cookie.get('mi-armario')) } catch (e) {}\n    let name\n    let price\n    let size\n    let id\n    let quantity\n    if (this.props.product !== undefined && 'length' in this.props.product)\n    {\n      this.props.product.forEach(product => {\n        if (product.id === this.state.product.replace(\".png\", \"\"))\n        {\n          name = 'name' in product ? product.name : \"\" \n          price = 'price' in product ? product.price : \"\"\n          size = 'size' in product ? product.size : \"\"\n          id = 'id' in product ? product.id : \"\"\n          quantity = 'quantity' in product ? product.quantity : \"\"\n        }\n      })\n      try{\n        quantity = cookie.cart[id] === undefined ? quantity : quantity - cookie.cart[id]\n      }\n      catch (e) {}\n\n      return (\n        <div>\n          {this.imgs()}\n          <Modal show={this.state.show} onHide={this.hideModal} dialogClassName=\"modal-dialog modal-dialog-centered modal-lg\">\n            <Modal.Header style={{fontSize: \"40px\"}}>{name}</Modal.Header>\n            <Modal.Body>\n              <div className=\"container\">\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <img \n                      src={`./images/${this.props.category}/${this.state.product}`}\n                      style={{width: \"500px\", height: \"500px\"}}\n                      alt=\"\">\n                    </img>\n                  </div>\n                  <div className=\"col pt-5\">\n                    <div style={ { fontSize: \"25px\" }} className=\"font-weight-bold text-primary\">\n                      {price} <small style={{fontSize: \"20px\"}} className=\"font-weight-bold\">EGP</small>\n                    </div><br/>\n                    <label className=\"font-weight-bold\" style={ { fontSize: \"25px\" }}>\n                      Size: <br />\n                      <button style={{fontSize: \"20px\"}} className=\"btn btn-outline-dark font-weight-bold text-capitalize\">{size}</button>\n                    </label><br/>\n                    <label className=\"font-weight-bold\" style={ { fontSize: \"25px\" }}>\n                      Quantity:\n                      <div className=\"input-group input-group-sm mb-3\">\n                        <input type=\"number\" min=\"0\" max={quantity} defaultValue=\"0\" ref={this.quantity} className=\"form-control\" aria-label=\"Small\" aria-describedby=\"inputGroup-sizing-sm\"></input>\n                      </div>\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </Modal.Body>\n            <Modal.Footer>\n              <button \n              className=\"btn btn-outline-primary\"\n              onClick={this.addToCart.bind(this, id, this.quantity)}>Add to Cart</button>\n            </Modal.Footer>\n          </Modal>\n        </div>\n        )\n    }\n    return null\n  }\n}"]},"metadata":{},"sourceType":"module"}